# 领域驱动设计

### 领域模型
- 面向复杂领域
- 模型能将设计和实现衔接
- 模型是演进的

一个模型达成共识；不再有分析模型、设计模型等；

### 领域驱动设计过程
1. 分析师、设计师、主要程序员参与模型设计；
2. 只针对核心资产使用统一的领域模型()；非核心资产可以差别的模型或无模型？

### 战略设计
- 识别业务核心域；按核心域、支撑域、通用域切分，核心域才是DDD应该关注的地方。
- 分离关注点；以Bounded Context为边界划分模型；？？？？

- 模型集成策略；

核心域--》BC，对BC建模--》Domain

### 战术设计
##### 建模元素
- Entity
- Value Object
- Aggregate
- Factory
- Repository
- Service
- Event

### 面向模型的实现模式(C语言)
##### 表达概念
###### 1 命名
命名同时表达领域语义与**模型角色**(如xxService，xxRepo)；

###### 2 行为
- 突出对外API，最小化暴露；
- 接口有领域含义，尽量不要有get/set(Tell Don't Ask原则)？？？
- 区分set(update)和构造的服务上下文区别；
- **通过包含接口类型，显式化声明接口；(派生行为，即例中的setup_handle函数指针)**

公有行为：直接提供接口；
私有行为：隐藏在自己的.c中；
派生行为：

###### 3 属性
- 明确区分属性和依赖

##### 表达关系
- is-a：派生与继承；C语言用函数指针表示is-a；
- has-a：组合&聚合；
- has-many：
- dependency：

##### 生命周期管理
C语言用factory和repository隐藏内存预占的全局变量；

##### 物理设计
保持逻辑结构和物理结构的一致性；
Modular C风格，一个.h和.c表示一个概念；


