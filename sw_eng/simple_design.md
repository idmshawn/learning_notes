# 简单设计

演进式设计原则： 
保持简单  --》 简单设计

软件设计的核心是降低“偶发成本(Incidental Cost)”，使得成本趋近于内在成本；

### 偶发成本来源
重复带来偶发成本：
- 确保一致性的成本；
- 散弹式修改带来的成本；
- 测试范围扩大带来的成本；

难以理解带来的偶发成本：
- 不知道在哪里修改
- 不知道怎么修改
- -》
- 沟通、溯源成本
- 理解错误导致修改错误引入更大的成本

冗余带来偶发成本
- 思维负担
- **过度设计**可引入冗余代码
（当前静态检查工具控制的较好）

### 简单设计原则
(Kent Beck提出)
1. 通过所有测试（Passes its tests）
2. 尽可能消除重复 (Minimizes duplication)：代码可复用度高
3. 尽可能清晰表达 (Maximizes clarity)
4. 更少代码元素 (Has fewer elements) :  避免过度设计
以上四个原则的重要程度依次降低。

四原则同样可评判领域建模等软件相关设计xx


# 设计原则

### 消除重复的设计原则
- 消除重复的关键：分离不同的变化方向；分离变化的关键是**确定接口**；
- 接口的设计原则：最小依赖原则；
- 接口的依赖原则：向稳定的方向依赖；

### 消除重复的手段
##### 数据变化
1. 数据参数化
2. 参数结构化
3. 结构模型化
#### 行为变化
1. 提炼接口
2. 不变的部分面向接口编程
3. 变化点面向接口拓展
4. 根据上下文选择和组合

本质是行为数据化，于是行为可以类似数据一样参数化，根据需要创建、转移、存储和延迟使用。
##### 类型变化
类型变化
- C++：模板；
- C语言：宏
本质是类型数据化，于是类型可以类似数据一样参数化，根据需要创建、转移、存储和延迟使用（泛型编程和元编程）。


# 重构技术(Refactoring)




# CleanCode

引言：[重构要首先识别代码坏味道](https://github.com/MagicBowen/refactoring/blob/master/effective-refactoring-1.md#%E5%85%B3%E4%BA%8E%E6%9C%AC%E6%96%87)

### 提升可读性

### 消除重复

### 耦合？

